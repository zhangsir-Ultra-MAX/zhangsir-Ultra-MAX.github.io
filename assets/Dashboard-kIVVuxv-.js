import{d as X,u as Z,a as tt,r as u,c as E,o as st,w as I,b,e as n,f as t,t as e,g as o,E as et,h as l,i as z,n as y,j as _,k as at,l as ot,m as lt,p as F,q as nt,s as it,v as ct,x as r,F as w,y as k,z as dt,A as C,B as L,C as rt,D as _t,G as ht,H as N,I as ut,J as c,K as pt,_ as vt}from"./index-EBZBD7IP.js";/* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css               */import{u as ft,P as mt}from"./usePullToRefresh-BJGuk06y.js";import{f as d,a as gt}from"./format-DgO97vlP.js";import{u as bt}from"./savings-BnhwmOt9.js";import{c as yt}from"./contracts-LobIsjLE.js";const wt={class:"dashboard"},kt={class:"dashboard-content"},$t={class:"portfolio-section"},Bt={class:"section-title"},Rt={class:"stats-grid"},Vt={class:"stat-header"},Dt={class:"stat-title"},St={class:"stat-content"},Mt={class:"stat-value"},At={class:"stat-header"},Ct={class:"stat-title"},Pt={class:"stat-content"},Wt={class:"stat-value"},xt={class:"stat-subtitle"},Tt={class:"stat-header"},Ut={class:"stat-title"},Et={class:"stat-content"},It={class:"stat-value"},zt={class:"stat-subtitle"},Ft={class:"text-sm text-green-600 dark:text-green-400"},Lt={class:"allocation-section"},Nt={class:"section-header"},Yt={class:"section-title"},qt={class:"view-toggle"},jt={class:"allocation-content"},Gt={key:0,class:"chart-container"},Ht={class:"chart-wrapper"},Jt={class:"pie-chart"},Kt={viewBox:"0 0 200 200",class:"w-full h-full"},Ot=["stroke","stroke-dasharray","stroke-dashoffset"],Qt={class:"chart-center"},Xt={class:"center-value"},Zt={class:"center-label"},ts={class:"chart-legend"},ss={class:"legend-info"},es={class:"legend-name"},as={class:"legend-details"},os={class:"legend-value"},ls={class:"legend-percentage"},ns={key:1,class:"allocation-table"},is={class:"asset-cell"},cs={class:"asset-info"},ds={class:"asset-name"},rs={class:"asset-symbol"},_s={class:"percentage-cell"},hs={class:"percentage-bar"},us={class:"percentage-text"},ps={class:"performance-section"},vs={class:"section-header"},fs={class:"section-title"},ms={class:"time-range"},gs={class:"performance-chart"},bs={class:"chart-placeholder"},ys={viewBox:"0 0 800 300",class:"w-full h-full"},ws=["points"],ks=["cx","cy"],$s={class:"chart-stats"},Bs={class:"stat-item"},Rs={class:"stat-label"},Vs={class:"stat-value"},Ds={class:"stat-item"},Ss={class:"stat-label"},Ms={class:"stat-value"},As={class:"stat-item"},Cs={class:"stat-label"},Ps={class:"stat-value"},Ws={class:"activity-section"},xs={class:"section-header"},Ts={class:"section-title"},Us={class:"activity-list"},Es={key:0,class:"empty-state"},Is={class:"text-gray-500 dark:text-gray-400"},zs={class:"activity-content"},Fs={class:"activity-title"},Ls={class:"activity-description"},Ns={class:"activity-meta"},Ys={class:"activity-time"},qs=X({__name:"Dashboard",setup(js){const{t:p}=Z(),$=tt(),v=bt(),B=u("chart"),P=u("30d"),R=u(2.34),W=u(""),Y=u({totalValue:25750.5,totalInvested:24e3,totalReturns:1750.5,returnPercentage:7.29,totalChange:2.45,avgAPY:8.2}),V=u([{name:"Savings Vault",symbol:"sWRMB",balance:12500,value:15e3,percentage:58.3,color:"#6366f1",change24h:1.2},{name:"Bond Pool",symbol:"WRMB",balance:8e3,value:8500,percentage:33,color:"#10b981",change24h:.8},{name:"Wrapped Tokens",symbol:"sWRMB",balance:2e3,value:2250.5,percentage:8.7,color:"#f59e0b",change24h:-.5}]),x=u([{x:50,y:250},{x:150,y:200},{x:250,y:180},{x:350,y:220},{x:450,y:160},{x:550,y:140},{x:650,y:120},{x:750,y:100}]),D=u({highest:26500,lowest:23800,volatility:12.5}),T=u([{id:1,type:"deposit",title:p("dashboard.depositSavings"),description:p("dashboard.depositDescription"),amount:"+1,000 WRMB",timestamp:Date.now()-36e5},{id:2,type:"bond",title:p("dashboard.bondSubscription"),description:p("dashboard.bondDescription"),amount:"+500 USDT",timestamp:Date.now()-72e5},{id:3,type:"wrap",title:p("dashboard.wrapTokens"),description:p("dashboard.wrapDescription"),amount:"200 sRMB → sWRMB",timestamp:Date.now()-864e5}]),q=E(()=>{let a=0;return V.value.map(i=>{const h=i.percentage/100*314,f={length:h,offset:-a,color:i.color};return a+=h,f})}),j=E(()=>x.value.map(a=>`${a.x},${a.y}`).join(" ")),G=a=>{switch(a){case"deposit":case"withdraw":return F;case"bond":return z;case"wrap":case"unwrap":return pt;default:return N}},S=async()=>{try{await Promise.all([v.fetchVaultData(),v.fetchUserBalances()]);const a=yt.getWrapManagerContract();if(!a)return;const i=await a.getSRMBLiquidity();W.value=ut(i.toString(),18).toString()}catch(a){console.error("Failed to refresh data:",a)}},{isRefreshing:H,isPulling:J,pullDistance:K,canRefresh:O}=ft({onRefresh:S}),M=async()=>{await S()};return st(async()=>{$.isConnected&&await M()}),I(()=>$.isConnected,async a=>{a&&await M()}),I(()=>$.chainId,async a=>{a&&await M()}),(a,i)=>{const h=et,f=lt("router-link"),m=it,U=ct,g=dt,Q=rt;return c(),b(mt,{"is-pulling":l(J),"is-refreshing":l(H),"pull-distance":l(K),"can-refresh":l(O),onRefresh:S},{default:n(()=>[t("div",wt,[t("div",kt,[t("div",$t,[t("h2",Bt,e(a.$t("dashboard.portfolio")),1),t("div",Rt,[o(f,{to:"/wrap",class:"stat-card primary"},{default:n(()=>[t("div",Vt,[t("h3",Dt,e(a.$t("dashboard.totalValue")),1),o(h,{class:"stat-icon"},{default:n(()=>[o(l(z))]),_:1})]),t("div",St,[t("div",Mt,e(l(d)(W.value)),1),t("div",{class:y(["stat-change",R.value>=0?"positive":"negative"])},[o(h,null,{default:n(()=>[R.value>=0?(c(),b(l(at),{key:0})):(c(),b(l(ot),{key:1}))]),_:1}),_(" "+e(Math.abs(R.value).toFixed(2))+"% ",1)],2)])]),_:1}),o(f,{to:"/savings",class:"stat-card"},{default:n(()=>[t("div",At,[t("h3",Ct,"WRMB "+e(a.$t("dashboard.savingsLiquidity")),1),o(h,{class:"stat-icon"},{default:n(()=>[o(l(F))]),_:1})]),t("div",Pt,[t("div",Wt,e(l(d)(l(v).totalAssets)),1),t("div",xt," ≈ $"+e(l(d)(parseFloat(l(v).totalAssets)*.14)),1)])]),_:1}),o(f,{to:"/savings",class:"stat-card"},{default:n(()=>[t("div",Tt,[t("h3",Ut,e(a.$t("dashboard.currentAPY")),1),o(h,{class:"stat-icon"},{default:n(()=>[o(l(nt))]),_:1})]),t("div",Et,[t("div",It,e(l(d)(l(v).dynamicAPY))+"% ",1),t("div",zt,[_(e(a.$t("dashboard.annualReturn"))+" ",1),t("span",Ft,"+"+e(l(d)(l(v).dynamicWRMB))+" WRMB",1)])])]),_:1})])]),t("div",Lt,[t("div",Nt,[t("h2",Yt,e(a.$t("portfolio.assetAllocation")),1),t("div",qt,[o(U,{modelValue:B.value,"onUpdate:modelValue":i[0]||(i[0]=s=>B.value=s),size:"small"},{default:n(()=>[o(m,{label:"chart"},{default:n(()=>[_(e(a.$t("portfolio.chart")),1)]),_:1}),o(m,{label:"table"},{default:n(()=>[_(e(a.$t("portfolio.table")),1)]),_:1})]),_:1},8,["modelValue"])])]),t("div",jt,[B.value==="chart"?(c(),r("div",Gt,[t("div",Ht,[t("div",Jt,[(c(),r("svg",Kt,[(c(!0),r(w,null,k(q.value,(s,A)=>(c(),r("circle",{key:A,cx:"100",cy:"100",r:"80",fill:"none",stroke:s.color,"stroke-width":"20","stroke-dasharray":`${s.length} ${314-s.length}`,"stroke-dashoffset":s.offset,class:"transition-all duration-500"},null,8,Ot))),128))])),t("div",Qt,[t("div",Xt,"$"+e(l(d)(Y.value.totalValue)),1),t("div",Zt,e(a.$t("portfolio.totalValue")),1)])])]),t("div",ts,[(c(!0),r(w,null,k(V.value,s=>(c(),r("div",{key:s.symbol,class:"legend-item"},[t("div",{class:"legend-color",style:C({backgroundColor:s.color})},null,4),t("div",ss,[t("div",es,e(s.name),1),t("div",as,[t("span",os,"$"+e(l(d)(s.value)),1),t("span",ls,"("+e(l(d)(s.percentage))+"%)",1)])])]))),128))])])):(c(),r("div",ns,[o(Q,{data:V.value,style:{width:"100%"}},{default:n(()=>[o(g,{prop:"name",label:a.$t("portfolio.asset"),"min-width":"120"},{default:n(({row:s})=>[t("div",is,[t("div",{class:"asset-color",style:C({backgroundColor:s.color})},null,4),t("div",cs,[t("div",ds,e(s.name),1),t("div",rs,e(s.symbol),1)])])]),_:1},8,["label"]),o(g,{prop:"balance",label:a.$t("portfolio.balance"),"min-width":"120"},{default:n(({row:s})=>[_(e(l(d)(s.balance))+" "+e(s.symbol),1)]),_:1},8,["label"]),o(g,{prop:"value",label:a.$t("portfolio.value"),"min-width":"120"},{default:n(({row:s})=>[_(" $"+e(l(d)(s.value)),1)]),_:1},8,["label"]),o(g,{prop:"percentage",label:a.$t("portfolio.allocation"),"min-width":"100"},{default:n(({row:s})=>[t("div",_s,[t("div",hs,[t("div",{class:"percentage-fill",style:C({width:`${s.percentage}%`,backgroundColor:s.color})},null,4)]),t("span",us,e(l(d)(s.percentage))+"%",1)])]),_:1},8,["label"]),o(g,{prop:"change24h",label:a.$t("portfolio.change24h"),"min-width":"100"},{default:n(({row:s})=>[t("div",{class:y(["change-cell",{positive:s.change24h>=0,negative:s.change24h<0}])},[o(h,null,{default:n(()=>[(c(),b(L(s.change24h>=0?"ArrowUp":"ArrowDown")))]),_:2},1024),_(" "+e(l(d)(Math.abs(s.change24h)))+"% ",1)],2)]),_:1},8,["label"])]),_:1},8,["data"])]))])]),t("div",ps,[t("div",vs,[t("h2",fs,e(a.$t("portfolio.performance")),1),t("div",ms,[o(U,{modelValue:P.value,"onUpdate:modelValue":i[1]||(i[1]=s=>P.value=s),size:"small"},{default:n(()=>[o(m,{label:"7d"},{default:n(()=>i[2]||(i[2]=[_("7D")])),_:1,__:[2]}),o(m,{label:"30d"},{default:n(()=>i[3]||(i[3]=[_("30D")])),_:1,__:[3]}),o(m,{label:"90d"},{default:n(()=>i[4]||(i[4]=[_("90D")])),_:1,__:[4]}),o(m,{label:"1y"},{default:n(()=>i[5]||(i[5]=[_("1Y")])),_:1,__:[5]})]),_:1},8,["modelValue"])])]),t("div",gs,[t("div",bs,[(c(),r("svg",ys,[i[6]||(i[6]=t("defs",null,[t("pattern",{id:"grid",width:"80",height:"30",patternUnits:"userSpaceOnUse"},[t("path",{d:"M 80 0 L 0 0 0 30",fill:"none",stroke:"#e5e7eb","stroke-width":"1",opacity:"0.5"})])],-1)),i[7]||(i[7]=t("rect",{width:"100%",height:"100%",fill:"url(#grid)"},null,-1)),t("polyline",{points:j.value,fill:"none",stroke:"#6366f1","stroke-width":"3",class:"transition-all duration-500"},null,8,ws),(c(!0),r(w,null,k(x.value,(s,A)=>(c(),r("circle",{key:A,cx:s.x,cy:s.y,r:"4",fill:"#6366f1",class:"transition-all duration-300 hover:r-6"},null,8,ks))),128))]))]),t("div",$s,[t("div",Bs,[t("span",Rs,e(a.$t("portfolio.highestValue")),1),t("span",Vs,"$"+e(l(d)(D.value.highest)),1)]),t("div",Ds,[t("span",Ss,e(a.$t("portfolio.lowestValue")),1),t("span",Ms,"$"+e(l(d)(D.value.lowest)),1)]),t("div",As,[t("span",Cs,e(a.$t("portfolio.volatility")),1),t("span",Ps,e(l(d)(D.value.volatility))+"%",1)])])])]),t("div",Ws,[t("div",xs,[t("h2",Ts,e(a.$t("dashboard.recentActivity")),1),o(f,{to:"/portfolio",class:"view-all-link"},{default:n(()=>[_(e(a.$t("dashboard.viewAll"))+" ",1),o(h,{class:"ml-1"},{default:n(()=>[o(l(_t))]),_:1})]),_:1})]),t("div",Us,[T.value.length===0?(c(),r("div",Es,[o(h,{class:"text-4xl text-gray-400 mb-2"},{default:n(()=>[o(l(N))]),_:1}),t("p",Is,e(a.$t("dashboard.noActivity")),1)])):ht("",!0),(c(!0),r(w,null,k(T.value.slice(0,5),s=>(c(),r("div",{key:s.id,class:"activity-item"},[t("div",{class:y(["activity-icon",s.type])},[o(h,null,{default:n(()=>[(c(),b(L(G(s.type))))]),_:2},1024)],2),t("div",zs,[t("div",Fs,e(s.title),1),t("div",Ls,e(s.description),1)]),t("div",Ns,[t("div",{class:y(["activity-amount",s.type])},e(s.amount),3),t("div",Ys,e(l(gt)(s.timestamp)),1)])]))),128))])])])])]),_:1},8,["is-pulling","is-refreshing","pull-distance","can-refresh"])}}}),se=vt(qs,[["__scopeId","data-v-889b8617"]]);export{se as default};
//# sourceMappingURL=Dashboard-kIVVuxv-.js.map

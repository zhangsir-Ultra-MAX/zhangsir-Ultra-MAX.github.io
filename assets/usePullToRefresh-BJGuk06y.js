import{d as Y,x as c,G as _,f as v,A as B,n as T,al as D,J as d,_ as b,r as p,o as C,a4 as S}from"./index-EBZBD7IP.js";const j={class:"pull-to-refresh-container"},z={class:"indicator-content"},A={key:1,class:"loading-spinner"},N={class:"content-wrapper"},U=Y({__name:"PullToRefresh",props:{isPulling:{type:Boolean},isRefreshing:{type:Boolean},pullDistance:{},canRefresh:{type:Boolean}},setup(w){return(n,s)=>(d(),c("div",j,[n.isPulling||n.isRefreshing?(d(),c("div",{key:0,class:"pull-indicator",style:B({opacity:Math.min(n.pullDistance/60,1),transform:`translateX(-50%) scale(${Math.min(n.pullDistance/60,1)})`})},[v("div",z,[n.isRefreshing?(d(),c("div",A,s[1]||(s[1]=[v("svg",{class:"animate-spin",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M21 12a9 9 0 11-6.219-8.56"})],-1)]))):(d(),c("div",{key:0,class:T(["pull-icon",{"can-refresh":n.canRefresh}])},[(d(),c("svg",{class:T(["refresh-arrow",{"rotate-180":n.canRefresh}]),width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s[0]||(s[0]=[v("path",{d:"M12 5v14M5 12l7-7 7 7"},null,-1)]),2))],2))])],4)):_("",!0),v("div",N,[D(n.$slots,"default",{},void 0,!0)])]))}}),$=b(U,[["__scopeId","data-v-cebf81a1"]]);function G(w){const{onRefresh:n,threshold:s=80,resistance:E=2.5,enabled:P=!0}=w,l=p(!1),t=p(0),o=p(!1),a=p(!1);let f=0,h=0,i=!1;const r=()=>P,m=()=>{i=window.scrollY===0||document.documentElement.scrollTop===0},y=e=>{!r()||l.value||(m(),i&&(f=e.touches[0].clientY,o.value=!1,t.value=0,a.value=!1))},R=e=>{if(!r()||l.value||!i)return;h=e.touches[0].clientY;const u=h-f;u>0&&(o.value=!0,t.value=Math.min(u/E,s*1.5),a.value=t.value>=s,u>10&&e.cancelable&&e.preventDefault())},k=async()=>{if(!(!r()||l.value))if(a.value&&o.value){l.value=!0,t.value=s;try{await n()}catch(e){console.error("Refresh failed:",e)}finally{setTimeout(()=>{l.value=!1,o.value=!1,t.value=0,a.value=!1},500)}}else o.value=!1,t.value=0,a.value=!1},L=e=>{!r()||l.value||(m(),i&&(f=e.clientY,o.value=!1,t.value=0,a.value=!1))},M=e=>{if(!r()||l.value||!i||!(e.buttons&1))return;h=e.clientY;const u=h-f;u>0&&(o.value=!0,t.value=Math.min(u/E,s*1.5),a.value=t.value>=s)},g=async()=>{if(!(!r()||l.value))if(a.value&&o.value){l.value=!0,t.value=s;try{await n()}catch(e){console.error("Refresh failed:",e)}finally{setTimeout(()=>{l.value=!1,o.value=!1,t.value=0,a.value=!1},500)}}else o.value=!1,t.value=0,a.value=!1};return C(()=>{r()&&(document.addEventListener("touchstart",y,{passive:!1}),document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",k),document.addEventListener("mousedown",L),document.addEventListener("mousemove",M),document.addEventListener("mouseup",g),window.addEventListener("scroll",m))}),S(()=>{document.removeEventListener("touchstart",y),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",k),document.removeEventListener("mousedown",L),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",g),window.removeEventListener("scroll",m)}),{isRefreshing:l,pullDistance:t,isPulling:o,canRefresh:a,isPullToRefreshEnabled:r}}export{$ as P,G as u};
//# sourceMappingURL=usePullToRefresh-BJGuk06y.js.map

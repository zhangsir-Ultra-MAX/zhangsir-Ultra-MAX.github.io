{"version":3,"file":"Bonds--7z0Xe_b.js","sources":["../../src/views/Bonds.vue"],"sourcesContent":["<template>\r\n  <PullToRefresh\r\n    :is-pulling=\"isPulling\"\r\n    :is-refreshing=\"isRefreshing\"\r\n    :pull-distance=\"pullDistance\"\r\n    :can-refresh=\"canRefresh\"\r\n  >\r\n    <div class=\"bonds\">\r\n    <div class=\"bonds-content\">\r\n      <!-- Pool Overview -->\r\n      <div class=\"pool-overview\">\r\n        <h2 class=\"section-title\">\r\n          {{ $t('bonds.poolOverview') }}\r\n        </h2>\r\n        \r\n        <div class=\"overview-grid\">\r\n          <div class=\"overview-card\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title\">{{ $t('bonds.totalPoolSize') }}</h3>\r\n              <el-icon class=\"card-icon\">\r\n                <Wallet />\r\n              </el-icon>\r\n            </div>\r\n            <div class=\"card-value\">\r\n              {{ formatNumber(poolStats.totalSize) }} USDT\r\n            </div>\r\n            <div class=\"card-subtitle\">\r\n              {{ $t('bonds.totalCapacity') }}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"overview-card\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title\">{{ $t('bonds.activeBonds') }}</h3>\r\n              <el-icon class=\"card-icon\">\r\n                <Document />\r\n              </el-icon>\r\n            </div>\r\n            <div class=\"card-value\">\r\n              {{ poolStats.activeBonds }}\r\n            </div>\r\n            <div class=\"card-subtitle\">\r\n              {{ $t('bonds.totalBonds') }}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"overview-card highlight\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title\">{{ $t('bonds.currentRate') }}</h3>\r\n              <el-icon class=\"card-icon\">\r\n                <TrendCharts />\r\n              </el-icon>\r\n            </div>\r\n            <div class=\"card-value\">\r\n              {{ formatNumber(poolStats.interestRate) }}%\r\n            </div>\r\n            <div class=\"card-subtitle\">\r\n              {{ $t('bonds.annualRate') }}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"overview-card\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"card-title\">{{ $t('bonds.availableCapacity') }}</h3>\r\n              <el-icon class=\"card-icon\">\r\n                <DataAnalysis />\r\n              </el-icon>\r\n            </div>\r\n            <div class=\"card-value\">\r\n              {{ formatNumber(poolStats.availableCapacity) }} USDT\r\n            </div>\r\n            <div class=\"card-subtitle\">\r\n              {{ formatNumber((poolStats.availableCapacity / poolStats.totalSize) * 100) }}% {{ $t('bonds.remaining') }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Bond Subscription -->\r\n      <div class=\"subscription-section\">\r\n        <div class=\"section-header\">\r\n          <h2 class=\"section-title\">\r\n            {{ $t('bonds.subscribe') }}\r\n          </h2>\r\n        </div>\r\n        \r\n        <div class=\"subscription-card\">\r\n          <div class=\"subscription-form\">\r\n            <div class=\"form-header\">\r\n              <h3 class=\"form-title\">{{ $t('bonds.subscribeWithUSDT') }}</h3>\r\n              <div class=\"balance-info\">\r\n                <span class=\"balance-label\">{{ $t('bonds.usdtBalance') }}:</span>\r\n                <span class=\"balance-value\">{{ formatNumber(usdtBalance) }} USDT</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"input-section\">\r\n              <div class=\"input-group\">\r\n                <el-input\r\n                  v-model=\"subscriptionAmount\"\r\n                  :placeholder=\"$t('bonds.enterAmount')\"\r\n                  size=\"large\"\r\n                  class=\"amount-input\"\r\n                  @input=\"handleSubscriptionAmountChange\"\r\n                >\r\n                  <template #suffix>\r\n                    <span class=\"input-suffix\">USDT</span>\r\n                  </template>\r\n                </el-input>\r\n                <el-button\r\n                  text\r\n                  @click=\"setMaxSubscription\"\r\n                  class=\"max-button\"\r\n                >\r\n                  {{ $t('common.max') }}\r\n                </el-button>\r\n              </div>\r\n              \r\n              <!-- Quick Amount Buttons -->\r\n              <div class=\"quick-amounts\">\r\n                <el-button\r\n                  v-for=\"amount in [100, 500, 1000, 5000]\"\r\n                  :key=\"amount\"\r\n                  size=\"small\"\r\n                  @click=\"setSubscriptionAmount(amount)\"\r\n                >\r\n                  {{ amount }} USDT\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Bond Terms -->\r\n            <div class=\"bond-terms\">\r\n              <h4 class=\"terms-title\">{{ $t('bonds.bondTerms') }}</h4>\r\n              <div class=\"terms-grid\">\r\n                <div class=\"term-item\">\r\n                  <span class=\"term-label\">{{ $t('bonds.duration') }}</span>\r\n                  <span class=\"term-value\">{{ bondTerms.duration }} {{ $t('bonds.days') }}</span>\r\n                </div>\r\n                <div class=\"term-item\">\r\n                  <span class=\"term-label\">{{ $t('bonds.interestRate') }}</span>\r\n                  <span class=\"term-value\">{{ formatNumber(bondTerms.interestRate) }}%</span>\r\n                </div>\r\n                <div class=\"term-item\">\r\n                  <span class=\"term-label\">{{ $t('bonds.minimumAmount') }}</span>\r\n                  <span class=\"term-value\">{{ formatNumber(bondTerms.minimumAmount) }} USDT</span>\r\n                </div>\r\n                <div class=\"term-item\">\r\n                  <span class=\"term-label\">{{ $t('bonds.maximumAmount') }}</span>\r\n                  <span class=\"term-value\">{{ formatNumber(bondTerms.maximumAmount) }} USDT</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Subscription Preview -->\r\n            <div v-if=\"subscriptionPreview\" class=\"preview-section\">\r\n              <h4 class=\"preview-title\">{{ $t('bonds.preview') }}</h4>\r\n              <div class=\"preview-details\">\r\n                <div class=\"preview-row\">\r\n                  <span>{{ $t('bonds.principalAmount') }}</span>\r\n                  <span class=\"preview-value\">${{ formatNumber(subscriptionPreview?.principal || '0') }}</span>\r\n                </div>\r\n                <div class=\"preview-row\">\r\n                  <span>{{ $t('bonds.wrmbReceived') }}</span>\r\n                  <span class=\"preview-value\">{{ formatNumber(subscriptionPreview?.wrmbAmount || '0') }} WRMB</span>\r\n                </div>\r\n                <div class=\"preview-row\">\r\n                  <span>{{ $t('bonds.maturityDate') }}</span>\r\n                  <span class=\"preview-value\">{{ formatDate(subscriptionPreview?.maturityDate || 0) }}</span>\r\n                </div>\r\n                <div class=\"preview-row\">\r\n                  <span>{{ $t('bonds.expectedReturn') }}</span>\r\n                  <span class=\"preview-value highlight\">{{ formatNumber(subscriptionPreview?.expectedReturn || '0') }} WRMB</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <el-button\r\n              type=\"primary\"\r\n              size=\"large\"\r\n              :loading=\"subscriptionInProgress\"\r\n              :disabled=\"!isSubscriptionValid\"\r\n              @click=\"handleSubscription\"\r\n              class=\"action-button\"\r\n            >\r\n              {{ $t('bonds.subscribeBond') }}\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- User Bonds -->\r\n      <div class=\"user-bonds-section\">\r\n        <div class=\"section-header\">\r\n          <h2 class=\"section-title\">\r\n            {{ $t('bonds.yourBonds') }}\r\n          </h2>\r\n          <div class=\"bonds-filter\">\r\n            <el-select v-model=\"bondsFilter\" size=\"small\">\r\n              <el-option :label=\"$t('bonds.allBonds')\" value=\"all\" />\r\n              <el-option :label=\"$t('bonds.activeBonds')\" value=\"active\" />\r\n              <el-option :label=\"$t('bonds.maturedBonds')\" value=\"matured\" />\r\n            </el-select>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"bonds-list\">\r\n          <div v-if=\"filteredUserBonds.length === 0\" class=\"empty-state\">\r\n            <el-icon class=\"text-4xl text-gray-400 mb-2\">\r\n              <Document />\r\n            </el-icon>\r\n            <p class=\"text-gray-500 dark:text-gray-400\">\r\n              {{ $t('bonds.noBonds') }}\r\n            </p>\r\n          </div>\r\n          \r\n          <div\r\n            v-for=\"bond in filteredUserBonds\"\r\n            :key=\"bond.bondId\"\r\n            class=\"bond-card\"\r\n            :class=\"{ 'matured': bond.isMatured, 'active': bond.isActive }\"\r\n          >\r\n            <div class=\"bond-header\">\r\n              <div class=\"bond-id\">\r\n                <span class=\"id-label\">{{ $t('bonds.bondId') }}</span>\r\n                <span class=\"id-value\">#{{ bond.bondId }}</span>\r\n              </div>\r\n              <div class=\"bond-status\">\r\n                <el-tag\r\n                  :type=\"getBondStatusType(bond)\"\r\n                  size=\"small\"\r\n                >\r\n                  {{ getBondStatusText(bond) }}\r\n                </el-tag>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"bond-details\">\r\n              <div class=\"detail-grid\">\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.principal') }}</span>\r\n                  <span class=\"detail-value\">{{ formatNumber(bond.principal) }} USDT</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.wrmbAmount') }}</span>\r\n                  <span class=\"detail-value\">{{ formatNumber(bond.wrmbAmount) }} WRMB</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.interestRate') }}</span>\r\n                  <span class=\"detail-value\">{{ formatNumber(bond.interestRate) }}%</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.subscribeDate') }}</span>\r\n                  <span class=\"detail-value\">{{ formatDate(bond.subscribeTime) }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.maturityDate') }}</span>\r\n                  <span class=\"detail-value\">{{ formatDate(bond.maturityTime) }}</span>\r\n                </div>\r\n                <div class=\"detail-item\">\r\n                  <span class=\"detail-label\">{{ $t('bonds.currentValue') }}</span>\r\n                  <span class=\"detail-value highlight\">{{ formatNumber(calculateCurrentValue(bond)) }} USDT</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"bond-actions\">\r\n              <div class=\"progress-info\">\r\n                <div class=\"progress-bar\">\r\n                  <div \r\n                    class=\"progress-fill\"\r\n                    :style=\"{ width: `${getBondProgress(bond)}%` }\"\r\n                  ></div>\r\n                </div>\r\n                <span class=\"progress-text\">\r\n                  {{ getBondProgress(bond) }}% {{ $t('bonds.completed') }}\r\n                </span>\r\n              </div>\r\n              \r\n              <el-button\r\n                v-if=\"bond.isMatured\"\r\n                type=\"primary\"\r\n                size=\"small\"\r\n                @click=\"handleRedeem(bond)\"\r\n                :loading=\"redeemInProgress[bond.bondId]\"\r\n              >\r\n                {{ $t('bonds.redeem') }}\r\n              </el-button>\r\n              \r\n              <el-button\r\n                v-else\r\n                size=\"small\"\r\n                disabled\r\n              >\r\n                {{ getRemainingTime(bond.maturityTime) }}\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Transaction Modal -->\r\n    <TransactionModal\r\n      v-model:visible=\"showTransactionModal\"\r\n      :title=\"transactionModalTitle\"\r\n      :steps=\"transactionSteps\"\r\n      :current-step=\"currentTransactionStep\"\r\n      :status=\"transactionStatus\"\r\n      :transaction-details=\"transactionDetails\"\r\n      :gas-info=\"gasInfo\"\r\n      :transaction-hash=\"transactionHash\"\r\n      :error-message=\"transactionError\"\r\n      @close=\"handleTransactionModalClose\"\r\n      @retry=\"handleTransactionRetry\"\r\n    /></div>\r\n  </PullToRefresh>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { ElMessage } from 'element-plus'\r\nimport {\r\n  Refresh,\r\n  Wallet,\r\n  Document,\r\n  TrendCharts,\r\n  DataAnalysis\r\n} from '@element-plus/icons-vue'\r\n\r\nimport PullToRefresh from '@/components/common/PullToRefresh.vue'\r\nimport TransactionModal from '@/components/common/TransactionModal.vue'\r\nimport { useWalletStore } from '@/stores/wallet'\r\nimport { formatNumber, formatDate } from '@/utils/format'\r\nimport { debounce } from '@/utils/debounce'\r\nimport { contractService } from '@/services/contracts'\r\nimport { parseUnits, formatUnits } from 'ethers'\r\nimport { usePullToRefresh } from '@/composables/usePullToRefresh'\r\n\r\ninterface BondInfo {\r\n  bondId: number\r\n  principal: string\r\n  wrmbAmount: string\r\n  subscribeTime: number\r\n  maturityTime: number\r\n  interestRate: string\r\n  isActive: boolean\r\n  isMatured: boolean\r\n}\r\n\r\ninterface BondPreview {\r\n  principal: string\r\n  wrmbAmount: string\r\n  maturityDate: number\r\n  expectedReturn: string\r\n}\r\n\r\ninterface GasInfo {\r\n  gasPrice: string\r\n  gasLimit: string\r\n  estimatedFee: string\r\n  maxFee: string\r\n}\r\n\r\nconst { t } = useI18n()\r\nconst walletStore = useWalletStore()\r\n\r\nconst loading = ref(false)\r\nconst subscriptionAmount = ref('')\r\nconst subscriptionPreview = ref<BondPreview | null>(null)\r\nconst subscriptionInProgress = ref(false)\r\nconst bondsFilter = ref('all')\r\nconst redeemInProgress = ref<Record<number, boolean>>({})\r\nconst needsApproval = ref(false)\r\nconst approvalInProgress = ref(false)\r\n\r\n// Contract data\r\nconst usdtBalance = ref('0')\r\nconst poolStats = ref({\r\n  totalSize: 0,\r\n  activeBonds: 0,\r\n  interestRate: 0,\r\n  availableCapacity: 0\r\n})\r\n\r\nconst bondTerms = ref({\r\n  duration: 0,\r\n  interestRate: 0,\r\n  minimumAmount: 0,\r\n  maximumAmount: 0\r\n})\r\n\r\nconst userBonds = ref<BondInfo[]>([])\r\nconst usdtAllowance = ref('0')\r\n\r\n// Transaction Modal\r\nconst showTransactionModal = ref(false)\r\nconst transactionModalTitle = ref('')\r\nconst currentTransactionStep = ref(0)\r\nconst transactionStatus = ref<'pending' | 'loading' | 'success' | 'error'>('pending')\r\nconst transactionHash = ref('')\r\nconst transactionError = ref('')\r\nconst gasInfo = ref<GasInfo | undefined>(undefined)\r\n\r\nconst transactionSteps = ref([\r\n  { label: t('transaction.approve'), description: t('transaction.approveDescription') },\r\n  { label: t('transaction.confirm'), description: t('transaction.confirmDescription') },\r\n  { label: t('transaction.complete'), description: t('transaction.completeDescription') }\r\n])\r\n\r\nconst transactionDetails = computed(() => {\r\n  const details = []\r\n  \r\n  if (subscriptionAmount.value && subscriptionPreview.value) {\r\n    details.push(\r\n      { label: t('bonds.subscriptionAmount'), value: `$${subscriptionAmount.value}`, highlight: true },\r\n      { label: t('bonds.wrmbReceived'), value: `${subscriptionPreview.value?.wrmbAmount || '0'} WRMB` },\r\n      { label: t('bonds.expectedReturn'), value: `$${subscriptionPreview.value?.expectedReturn || '0'} WRMB` }\r\n    )\r\n  }\r\n  \r\n  return details\r\n})\r\n\r\nconst filteredUserBonds = computed(() => {\r\n  switch (bondsFilter.value) {\r\n    case 'active':\r\n      return userBonds.value.filter(bond => bond.isActive)\r\n    case 'matured':\r\n      return userBonds.value.filter(bond => bond.isMatured)\r\n    default:\r\n      return userBonds.value\r\n  }\r\n})\r\n\r\nconst isSubscriptionValid = computed(() => {\r\n  const amount = parseFloat(subscriptionAmount.value)\r\n  return amount >= bondTerms.value.minimumAmount && \r\n         amount <= bondTerms.value.maximumAmount && \r\n         amount <= parseFloat(usdtBalance.value) &&\r\n         walletStore.isConnected\r\n})\r\n\r\n// Contract interaction functions\r\nconst fetchUSDTBalance = async () => {\r\n  try {\r\n    if (!walletStore.isConnected || !walletStore.address) return\r\n    \r\n    const usdtContract = contractService.getUSDTContract()\r\n    if (!usdtContract) return\r\n    \r\n    const balance = await usdtContract.balanceOf(walletStore.address)\r\n    usdtBalance.value = formatUnits(balance, 6) // USDT has 6 decimals\r\n  } catch (error) {\r\n    console.error('Failed to fetch USDT balance:', error)\r\n  }\r\n}\r\n\r\nconst fetchUSDTAllowance = async () => {\r\n  try {\r\n    if (!walletStore.isConnected || !walletStore.address) return\r\n    \r\n    const usdtContract = contractService.getUSDTContract()\r\n    const addresses = contractService.getAddresses()\r\n    if (!usdtContract || !addresses.BOND_POOL) return\r\n    \r\n    const allowance = await usdtContract.allowance(walletStore.address, addresses.BOND_POOL)\r\n    usdtAllowance.value = formatUnits(allowance, 6)\r\n  } catch (error) {\r\n    console.error('Failed to fetch USDT allowance:', error)\r\n  }\r\n}\r\n\r\nconst fetchPoolStats = async () => {\r\n  try {\r\n    const bondPoolContract = contractService.getBondPoolContract()\r\n    if (!bondPoolContract) return\r\n    \r\n    const [totalSize, activeBonds, availableCapacity] = await bondPoolContract.getPoolStats()\r\n    const config = await bondPoolContract.poolConfig()\r\n    \r\n    poolStats.value = {\r\n      totalSize: parseFloat(formatUnits(totalSize, 6)),\r\n      activeBonds: parseFloat(activeBonds),\r\n      interestRate: parseFloat(formatUnits(config.interestRate, 2)), // Assuming 18 decimals for percentage\r\n      availableCapacity: parseFloat(formatUnits(availableCapacity, 6))\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to fetch pool stats:', error)\r\n  }\r\n}\r\n\r\nconst fetchBondTerms = async () => {\r\n  try {\r\n    const bondPoolContract = contractService.getBondPoolContract()\r\n    if (!bondPoolContract) return\r\n    \r\n    const config = await bondPoolContract.poolConfig()\r\n\r\n    bondTerms.value = {\r\n      duration: parseFloat(config.bondDuration) / (24 * 60 * 60), // Convert seconds to days\r\n      interestRate: parseFloat(formatUnits(config.interestRate, 2)),\r\n      minimumAmount: parseFloat(formatUnits(config.minSubscription, 6)),\r\n      maximumAmount: parseFloat(formatUnits(config.maxSubscription, 6))\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to fetch bond terms:', error)\r\n  }\r\n}\r\n\r\nconst fetchUserBonds = async () => {\r\n  try {\r\n    if (!walletStore.isConnected || !walletStore.address) return\r\n    \r\n    const bondPoolContract = contractService.getBondPoolContract()\r\n    if (!bondPoolContract) return\r\n    \r\n    const [bondIds, bondsData] = await bondPoolContract.getUserBonds(walletStore.address)\r\n    \r\n    const bonds: BondInfo[] = []\r\n    for (let i = 0; i < bondIds.length; i++) {\r\n      const bondId = Number(bondIds[i])\r\n      const bondData = bondsData[i]\r\n      \r\n      const now = Date.now() / 1000 // Convert to seconds\r\n      const isMatured = now >= Number(bondData.maturityTime)\r\n      \r\n      bonds.push({\r\n        bondId,\r\n        principal: formatUnits(bondData.principal, 6),\r\n        wrmbAmount: formatUnits(bondData.wrmbAmount, 18),\r\n        subscribeTime: Number(bondData.subscribeTime) * 1000, // Convert to milliseconds\r\n        maturityTime: Number(bondData.maturityTime) * 1000,\r\n        interestRate: formatUnits(bondData.interestRate, 2),\r\n        isActive: bondData.isActive && !isMatured,\r\n        isMatured\r\n      })\r\n    }\r\n    \r\n    userBonds.value = bonds\r\n  } catch (error) {\r\n    console.error('Failed to fetch user bonds:', error)\r\n  }\r\n}\r\n\r\nconst checkApprovalNeeded = async (amount: string) => {\r\n  try {\r\n    const amountBN = parseUnits(amount, 6)\r\n    const allowanceBN = parseUnits(usdtAllowance.value, 6)\r\n    needsApproval.value = allowanceBN < amountBN\r\n  } catch (error) {\r\n    console.error('Failed to check approval:', error)\r\n    needsApproval.value = true\r\n  }\r\n}\r\n\r\n// Generate subscription preview\r\nconst generateSubscriptionPreview = async (amount: string): Promise<BondPreview | null> => {\r\n  const principal = parseFloat(amount)\r\n  if (!principal || principal <= 0) return null\r\n  \r\n  try {\r\n    const bondPoolContract = contractService.getBondPoolContract()\r\n    if (!bondPoolContract) {\r\n      // Fallback to calculation if contract not available\r\n      const wrmbRate = 7.2 // 1 USDT = 0.96 WRMB\r\n      const wrmbAmount = principal * wrmbRate\r\n      const maturityDate = Date.now() + bondTerms.value.duration * 24 * 60 * 60 * 1000\r\n      const expectedReturn = principal * (1 + bondTerms.value.interestRate / 100 * bondTerms.value.duration / 365)\r\n      \r\n      return {\r\n        principal: principal.toFixed(2),\r\n        wrmbAmount: wrmbAmount.toFixed(2),\r\n        maturityDate,\r\n        expectedReturn: expectedReturn.toFixed(2)\r\n      }\r\n    }\r\n    \r\n    const amountBN = parseUnits(amount, 6)\r\n    const [wrmbAmount, maturityTime, expectedReturn] = await bondPoolContract.previewSubscription(amountBN)\r\n    \r\n    return {\r\n      principal: principal.toFixed(2),\r\n      wrmbAmount: formatUnits(wrmbAmount, 18),\r\n      maturityDate: Number(maturityTime) * 1000, // Convert to milliseconds\r\n      expectedReturn: formatUnits(expectedReturn, 18)\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to generate subscription preview:', error)\r\n    return null\r\n  }\r\n}\r\n\r\n// Debounced preview function\r\nconst debouncedSubscriptionPreview = debounce(async (amount: string) => {\r\n  subscriptionPreview.value = await generateSubscriptionPreview(amount)\r\n  if (amount && parseFloat(amount) > 0) {\r\n    await checkApprovalNeeded(amount)\r\n  }\r\n}, 500)\r\n\r\nconst handleSubscriptionAmountChange = (value: string) => {\r\n  debouncedSubscriptionPreview(value)\r\n}\r\n\r\nconst setMaxSubscription = () => {\r\n  const maxAmount = Math.min(\r\n    parseFloat(usdtBalance.value),\r\n    bondTerms.value.maximumAmount,\r\n    poolStats.value.availableCapacity\r\n  )\r\n  subscriptionAmount.value = maxAmount.toString()\r\n  handleSubscriptionAmountChange(subscriptionAmount.value)\r\n}\r\n\r\nconst setSubscriptionAmount = (amount: number) => {\r\n  subscriptionAmount.value = amount.toString()\r\n  handleSubscriptionAmountChange(subscriptionAmount.value)\r\n}\r\n\r\nconst getBondStatusType = (bond: BondInfo) => {\r\n  if (bond.isMatured) return 'success'\r\n  if (bond.isActive) return 'primary'\r\n  return 'info'\r\n}\r\n\r\nconst getBondStatusText = (bond: BondInfo) => {\r\n  if (bond.isMatured) return t('bonds.matured')\r\n  if (bond.isActive) return t('bonds.active')\r\n  return t('bonds.inactive')\r\n}\r\n\r\nconst getBondProgress = (bond: BondInfo) => {\r\n  const now = Date.now()\r\n  const total = bond.maturityTime - bond.subscribeTime\r\n  const elapsed = now - bond.subscribeTime\r\n  return Math.min(100, Math.max(0, (elapsed / total) * 100))\r\n}\r\n\r\nconst calculateCurrentValue = (bond: BondInfo) => {\r\n  const principal = parseFloat(bond.principal)\r\n  const rate = parseFloat(bond.interestRate) / 100\r\n  const progress = getBondProgress(bond) / 100\r\n  const duration = bondTerms.value.duration / 365 // Convert to years\r\n  \r\n  return principal * (1 + rate * duration * progress)\r\n}\r\n\r\nconst getRemainingTime = (maturityTime: number) => {\r\n  const now = Date.now()\r\n  const remaining = maturityTime - now\r\n  \r\n  if (remaining <= 0) return t('bonds.matured')\r\n  \r\n  const days = Math.ceil(remaining / (24 * 60 * 60 * 1000))\r\n  return `${days} ${t('bonds.daysRemaining')}`\r\n}\r\n\r\nconst approveUSDT = async () => {\r\n  try {\r\n    approvalInProgress.value = true\r\n    currentTransactionStep.value = 0\r\n    transactionStatus.value = 'loading'\r\n    \r\n    const usdtContract = contractService.getUSDTContract(true)\r\n    const addresses = contractService.getAddresses()\r\n    if (!usdtContract || !addresses.BOND_POOL) {\r\n      throw new Error('Contract not available')\r\n    }\r\n    \r\n    const amountBN = parseUnits(subscriptionAmount.value, 6)\r\n    const tx = await usdtContract.approve(addresses.BOND_POOL, amountBN)\r\n    \r\n    transactionHash.value = tx.hash\r\n    await tx.wait()\r\n    \r\n    await fetchUSDTAllowance()\r\n    needsApproval.value = false\r\n    currentTransactionStep.value = 1\r\n    \r\n    ElMessage.success(t('bonds.approvalSuccess'))\r\n  } catch (error: any) {\r\n    transactionStatus.value = 'error'\r\n    transactionError.value = error.message || t('bonds.approvalFailed')\r\n    throw error\r\n  } finally {\r\n    approvalInProgress.value = false\r\n  }\r\n}\r\n\r\nconst subscribeBond = async () => {\r\n  try {\r\n    currentTransactionStep.value = 1\r\n    transactionStatus.value = 'loading'\r\n    \r\n    const bondPoolContract = contractService.getBondPoolContract(true)\r\n    if (!bondPoolContract) {\r\n      throw new Error('Bond pool contract not available')\r\n    }\r\n    \r\n    const amountBN = parseUnits(subscriptionAmount.value, 6)\r\n    const tx = await bondPoolContract.subscribeBond(amountBN)\r\n    \r\n    transactionHash.value = tx.hash\r\n    await tx.wait()\r\n    \r\n    currentTransactionStep.value = 2\r\n    transactionStatus.value = 'success'\r\n    \r\n    // Refresh data\r\n    await Promise.all([\r\n      fetchUSDTBalance(),\r\n      fetchUserBonds(),\r\n      fetchPoolStats()\r\n    ])\r\n    \r\n    // Reset form\r\n    subscriptionAmount.value = ''\r\n    subscriptionPreview.value = null\r\n    needsApproval.value = false\r\n    \r\n    ElMessage.success(t('bonds.subscriptionSuccess'))\r\n  } catch (error: any) {\r\n    transactionStatus.value = 'error'\r\n    transactionError.value = error.message || t('bonds.subscriptionFailed')\r\n    throw error\r\n  }\r\n}\r\n\r\nconst handleSubscription = async () => {\r\n  if (!isSubscriptionValid.value) return\r\n  \r\n  transactionModalTitle.value = t('bonds.subscriptionTransaction')\r\n  showTransactionModal.value = true\r\n  currentTransactionStep.value = 0\r\n  transactionStatus.value = 'pending'\r\n  subscriptionInProgress.value = true\r\n  transactionHash.value = ''\r\n  transactionError.value = ''\r\n  \r\n  try {\r\n    // Check if approval is needed\r\n    if (needsApproval.value) {\r\n      await approveUSDT()\r\n    }\r\n    \r\n    // Subscribe to bond\r\n    await subscribeBond()\r\n    \r\n  } catch (error: any) {\r\n    console.error('Subscription failed:', error)\r\n    if (transactionStatus.value !== 'error') {\r\n      transactionStatus.value = 'error'\r\n      transactionError.value = error.message || t('bonds.subscriptionFailed')\r\n    }\r\n  } finally {\r\n    subscriptionInProgress.value = false\r\n  }\r\n}\r\n\r\nconst handleRedeem = async (bond: BondInfo) => {\r\n  if (!bond.isMatured) {\r\n    ElMessage.warning(t('bonds.bondNotMatured'))\r\n    return\r\n  }\r\n  \r\n  redeemInProgress.value[bond.bondId] = true\r\n  \r\n  try {\r\n    const bondPoolContract = contractService.getBondPoolContract(true)\r\n    if (!bondPoolContract) {\r\n      throw new Error('Bond pool contract not available')\r\n    }\r\n    \r\n    const tx = await bondPoolContract.matureBond(bond.bondId)\r\n    await tx.wait()\r\n    \r\n    // Refresh data\r\n    await Promise.all([\r\n      fetchUSDTBalance(),\r\n      fetchUserBonds(),\r\n      fetchPoolStats()\r\n    ])\r\n    \r\n    ElMessage.success(t('bonds.redeemSuccess'))\r\n  } catch (error: any) {\r\n    console.error('Redemption failed:', error)\r\n    ElMessage.error(error.message || t('bonds.redeemFailed'))\r\n  } finally {\r\n    redeemInProgress.value[bond.bondId] = false\r\n  }\r\n}\r\n\r\nconst handleTransactionModalClose = () => {\r\n  showTransactionModal.value = false\r\n  transactionHash.value = ''\r\n  transactionError.value = ''\r\n}\r\n\r\nconst handleTransactionRetry = () => {\r\n  handleSubscription()\r\n}\r\n\r\nconst refreshData = async () => {\r\n  loading.value = true\r\n  try {\r\n    await Promise.all([\r\n      fetchPoolStats(),\r\n      fetchBondTerms()\r\n    ])\r\n    \r\n    if (walletStore.isConnected && walletStore.address) {\r\n      await Promise.all([\r\n        fetchUSDTBalance(),\r\n        fetchUSDTAllowance(),\r\n        fetchUserBonds()\r\n      ])\r\n    }\r\n  } catch (error) {\r\n    console.error('Failed to refresh data:', error)\r\n    ElMessage.error(t('common.dataLoadFailed'))\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// Watch for wallet connection changes\r\nwatch(\r\n  () => walletStore.isConnected,\r\n  async (isConnected) => {\r\n    if (isConnected) {\r\n      await refreshData()\r\n    } else {\r\n      // Clear user-specific data when disconnected\r\n      usdtBalance.value = '0'\r\n      usdtAllowance.value = '0'\r\n      userBonds.value = []\r\n      subscriptionAmount.value = ''\r\n      subscriptionPreview.value = null\r\n    }\r\n  }\r\n)\r\n\r\nwatch(\r\n  () => walletStore.address,\r\n  async (newAccount, oldAccount) => {\r\n    if (newAccount && newAccount !== oldAccount) {\r\n      await refreshData()\r\n    }\r\n  }\r\n)\r\n\r\n// Pull to refresh functionality\r\nconst { isRefreshing, pullDistance, isPulling, canRefresh } = usePullToRefresh({\r\n  onRefresh: refreshData,\r\n  enabled: true\r\n})\r\n\r\nonMounted(async () => {\r\n  await refreshData()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.bonds {\r\n  @apply bg-gray-50 dark:bg-gray-900;\r\n}\r\n\r\n.bonds-content {\r\n  @apply max-w-6xl mx-auto px-6 py-8 space-y-8;\r\n}\r\n\r\n.section-title {\r\n  @apply text-2xl font-bold text-gray-900 dark:text-white mb-6;\r\n}\r\n\r\n.section-header {\r\n  @apply flex items-center justify-between mb-6;\r\n}\r\n\r\n.overview-grid {\r\n  @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6;\r\n}\r\n\r\n.overview-card {\r\n  @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-all duration-200 hover:shadow-md;\r\n}\r\n\r\n.overview-card.highlight {\r\n  @apply bg-gradient-to-br from-primary-500 to-primary-600 text-white border-primary-500;\r\n}\r\n\r\n.card-header {\r\n  @apply flex items-center justify-between mb-4;\r\n}\r\n\r\n.card-title {\r\n  @apply text-sm font-medium text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n.overview-card.highlight .card-title {\r\n  @apply text-primary-100;\r\n}\r\n\r\n.card-icon {\r\n  @apply text-xl text-gray-400;\r\n}\r\n\r\n.overview-card.highlight .card-icon {\r\n  @apply text-primary-200;\r\n}\r\n\r\n.card-value {\r\n  @apply text-2xl font-bold text-gray-900 dark:text-white;\r\n}\r\n\r\n.overview-card.highlight .card-value {\r\n  @apply text-white;\r\n}\r\n\r\n.card-subtitle {\r\n  @apply text-sm text-gray-500 dark:text-gray-400 mt-1;\r\n}\r\n\r\n.overview-card.highlight .card-subtitle {\r\n  @apply text-primary-100;\r\n}\r\n\r\n.subscription-card {\r\n  @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-8;\r\n}\r\n\r\n.subscription-form {\r\n  @apply max-w-2xl mx-auto;\r\n}\r\n\r\n.form-header {\r\n  @apply flex items-center justify-between mb-6;\r\n}\r\n\r\n.form-title {\r\n  @apply text-lg font-semibold text-gray-900 dark:text-white;\r\n}\r\n\r\n.balance-info {\r\n  @apply text-sm;\r\n}\r\n\r\n.balance-label {\r\n  @apply text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n.balance-value {\r\n  @apply font-medium text-gray-900 dark:text-white ml-1;\r\n}\r\n\r\n.input-section {\r\n  @apply space-y-4 mb-6;\r\n}\r\n\r\n.input-group {\r\n  @apply flex items-center space-x-3;\r\n}\r\n\r\n.amount-input {\r\n  @apply flex-1;\r\n}\r\n\r\n.input-suffix {\r\n  @apply text-gray-500 dark:text-gray-400 font-medium;\r\n}\r\n\r\n.max-button {\r\n  @apply text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300;\r\n}\r\n\r\n.quick-amounts {\r\n  @apply flex space-x-2;\r\n}\r\n\r\n.bond-terms {\r\n  @apply bg-gray-50 dark:bg-gray-700 rounded-lg p-6 mb-6;\r\n}\r\n\r\n.terms-title {\r\n  @apply text-lg font-semibold text-gray-900 dark:text-white mb-4;\r\n}\r\n\r\n.terms-grid {\r\n  @apply grid grid-cols-2 gap-4;\r\n}\r\n\r\n.term-item {\r\n  @apply flex flex-col;\r\n}\r\n\r\n.term-label {\r\n  @apply text-sm text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n.term-value {\r\n  @apply font-medium text-gray-900 dark:text-white mt-1;\r\n}\r\n\r\n.preview-section {\r\n  @apply bg-gray-50 dark:bg-gray-700 rounded-lg p-6 mb-6;\r\n}\r\n\r\n.preview-title {\r\n  @apply text-lg font-semibold text-gray-900 dark:text-white mb-4;\r\n}\r\n\r\n.preview-details {\r\n  @apply space-y-3;\r\n}\r\n\r\n.preview-row {\r\n  @apply flex items-center justify-between;\r\n}\r\n\r\n.preview-value {\r\n  @apply font-medium text-gray-900 dark:text-white;\r\n}\r\n\r\n.preview-value.highlight {\r\n  @apply text-green-600 dark:text-green-400;\r\n}\r\n\r\n.action-button {\r\n  @apply w-full;\r\n}\r\n\r\n.bonds-filter {\r\n  @apply flex items-center space-x-4;\r\n}\r\n\r\n.bonds-list {\r\n  @apply space-y-6;\r\n}\r\n\r\n.empty-state {\r\n  @apply flex flex-col items-center justify-center py-12 text-center;\r\n}\r\n\r\n.bond-card {\r\n  @apply bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-all duration-200 hover:shadow-md;\r\n}\r\n\r\n.bond-card.matured {\r\n  @apply border-green-200 dark:border-green-700 bg-green-50 dark:bg-green-900/20;\r\n}\r\n\r\n.bond-card.active {\r\n  @apply border-primary-200 dark:border-primary-700;\r\n}\r\n\r\n.bond-header {\r\n  @apply flex items-center justify-between mb-4;\r\n}\r\n\r\n.bond-id {\r\n  @apply flex items-center space-x-2;\r\n}\r\n\r\n.id-label {\r\n  @apply text-sm text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n.id-value {\r\n  @apply font-medium text-gray-900 dark:text-white;\r\n}\r\n\r\n.detail-grid {\r\n  @apply grid grid-cols-2 lg:grid-cols-3 gap-4 mb-6;\r\n}\r\n\r\n.detail-item {\r\n  @apply flex flex-col;\r\n}\r\n\r\n.detail-label {\r\n  @apply text-sm text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n.detail-value {\r\n  @apply font-medium text-gray-900 dark:text-white mt-1;\r\n}\r\n\r\n.detail-value.highlight {\r\n  @apply text-green-600 dark:text-green-400;\r\n}\r\n\r\n.bond-actions {\r\n  @apply flex items-center justify-between;\r\n}\r\n\r\n.progress-info {\r\n  @apply flex-1 mr-4;\r\n}\r\n\r\n.progress-bar {\r\n  @apply w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden mb-2;\r\n}\r\n\r\n.progress-fill {\r\n  @apply h-full bg-primary-500 transition-all duration-300;\r\n}\r\n\r\n.progress-text {\r\n  @apply text-sm text-gray-600 dark:text-gray-400;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .bonds-header {\r\n    @apply px-4 py-6;\r\n  }\r\n  \r\n  .header-content {\r\n    @apply flex-col items-start space-y-4;\r\n  }\r\n  \r\n  .bonds-content {\r\n    @apply px-4 py-6;\r\n  }\r\n  \r\n  .overview-grid {\r\n    @apply grid-cols-1 gap-4;\r\n  }\r\n  \r\n  .subscription-card {\r\n    @apply p-6;\r\n  }\r\n  \r\n  .subscription-form {\r\n    @apply max-w-full;\r\n  }\r\n  \r\n  .terms-grid {\r\n    @apply grid-cols-1 gap-3;\r\n  }\r\n  \r\n  .detail-grid {\r\n    @apply grid-cols-1 gap-3;\r\n  }\r\n  \r\n  .bond-actions {\r\n    @apply flex-col items-stretch space-y-3;\r\n  }\r\n  \r\n  .progress-info {\r\n    @apply mr-0;\r\n  }\r\n}\r\n</style>"],"names":["t","useI18n","walletStore","useWalletStore","loading","ref","subscriptionAmount","subscriptionPreview","subscriptionInProgress","bondsFilter","redeemInProgress","needsApproval","approvalInProgress","usdtBalance","poolStats","bondTerms","userBonds","usdtAllowance","showTransactionModal","transactionModalTitle","currentTransactionStep","transactionStatus","transactionHash","transactionError","gasInfo","transactionSteps","transactionDetails","computed","details","filteredUserBonds","bond","isSubscriptionValid","amount","fetchUSDTBalance","usdtContract","contractService","balance","formatUnits","error","fetchUSDTAllowance","addresses","allowance","fetchPoolStats","bondPoolContract","totalSize","activeBonds","availableCapacity","config","fetchBondTerms","fetchUserBonds","bondIds","bondsData","bonds","i","bondId","bondData","isMatured","checkApprovalNeeded","amountBN","parseUnits","allowanceBN","generateSubscriptionPreview","principal","wrmbAmount","maturityDate","expectedReturn","maturityTime","debouncedSubscriptionPreview","debounce","handleSubscriptionAmountChange","value","setMaxSubscription","maxAmount","setSubscriptionAmount","getBondStatusType","getBondStatusText","getBondProgress","now","total","elapsed","calculateCurrentValue","rate","progress","duration","getRemainingTime","remaining","approveUSDT","tx","ElMessage","subscribeBond","handleSubscription","handleRedeem","handleTransactionModalClose","handleTransactionRetry","refreshData","watch","isConnected","newAccount","oldAccount","isRefreshing","pullDistance","isPulling","canRefresh","usePullToRefresh","onMounted","_createBlock","PullToRefresh","_unref","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$t","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_createVNode","_component_el_icon","Wallet","_hoisted_9","formatNumber","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","Document","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","TrendCharts","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","DataAnalysis","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_component_el_input","$event","_cache","_component_el_button","_hoisted_38","_createElementBlock","_Fragment","_renderList","_createTextVNode","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_openBlock","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_component_el_select","_component_el_option","_hoisted_69","_hoisted_70","_hoisted_71","_normalizeClass","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_component_el_tag","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_normalizeStyle","_hoisted_100","TransactionModal"],"mappings":"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"}
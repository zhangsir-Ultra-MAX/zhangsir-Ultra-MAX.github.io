import{d as G,u as J,a as X,r as x,w as A,c as F,a2 as R,o as Y,x as d,f as e,G as m,t as r,h as a,j as z,n as Z,F as j,y as q,a3 as p,ap as H,a5 as S,a6 as E,I as K,aq as ee,O as te,J as i,_ as se}from"./index-EBZBD7IP.js";import{c as O}from"./contracts-LobIsjLE.js";const ae={class:"status-page"},oe={class:"container mx-auto px-4 py-8"},re={class:"text-3xl font-bold text-gray-900 dark:text-white mb-8"},le={class:"mb-6"},ne=["disabled","title"],de={class:"mb-8"},ie={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},ue={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},ce={class:"flex items-center justify-between mb-3"},ge={class:"text-lg font-semibold text-gray-900 dark:text-white"},be={class:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm font-medium rounded"},ye={class:"space-y-3"},ve={class:"text-sm text-gray-600 dark:text-gray-400"},xe={class:"font-medium"},me={class:"text-sm text-gray-600 dark:text-gray-400"},he={class:"font-medium"},pe={key:0,class:"text-gray-400 dark:text-gray-500"},fe={key:1,class:"font-mono"},ke={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},_e={class:"font-medium"},we={key:0,class:"text-gray-400 dark:text-gray-500"},Ce={key:1,class:"font-mono text-blue-600 dark:text-blue-400"},Me={class:"text-sm text-gray-600 dark:text-gray-400"},Be={class:"font-medium"},Te={class:"mt-1 flex items-center space-x-2"},Ae={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs font-mono break-all text-gray-900 dark:text-gray-100"},je={key:0,class:"flex space-x-1"},qe=["onClick","title"],Se=["onClick","title"],Ee={key:1,class:"flex space-x-2 mt-3"},Oe=["onClick"],$e=["onClick","disabled"],Ne={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4"},De={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},Ve={class:"flex items-center justify-between mb-3"},Fe={class:"text-lg font-semibold text-gray-900 dark:text-white"},Re={class:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-sm font-medium rounded"},ze={class:"space-y-2"},He={class:"text-sm text-gray-600 dark:text-gray-400"},Ke={class:"font-medium"},Ue={class:"mt-1 flex items-center space-x-2"},Ie={class:"bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs font-mono break-all text-gray-900 dark:text-gray-100"},Pe={key:0,class:"flex space-x-1"},Le=["onClick","title"],Qe=["onClick","title"],We={class:"flex space-x-2 mt-3"},Ge=["onClick"],Je={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xe={class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4"},Ye={class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},Ze={class:"space-y-4"},et={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tt=["placeholder"],st={class:"flex space-x-3"},at=["disabled"],ot={key:0,class:"mt-4 space-y-2"},rt={class:"font-medium text-gray-900 dark:text-white"},lt={class:"font-medium text-gray-900 dark:text-white"},nt={class:"font-mono text-sm text-gray-700 dark:text-gray-300"},dt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},it={class:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4"},ut={class:"text-lg font-semibold mb-4 text-gray-900 dark:text-white"},ct={class:"space-y-4"},gt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},bt=["placeholder"],yt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},vt=["placeholder"],xt={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},mt={class:"flex space-x-3"},ht=["disabled"],pt=["disabled"],ft={key:2,class:"fixed top-4 right-4 bg-green-500 dark:bg-green-600 text-white px-4 py-2 rounded-md shadow-lg z-50 transition-all duration-300"},kt=G({__name:"Status",setup(_t){const{t:s}=J(),y=X(),c=x(y.chainId||1),b=x(!1),f=x(s("status.toast.addressCopied")),v=x({}),k=x(""),w=x({}),M=x(!1),T=x(!1),B=x(!1),u=x({tokenKey:"",toAddress:"",amount:"",loading:!1});A(()=>y.chainId,l=>{l&&l!==c.value&&(c.value=l,_())},{immediate:!0}),F(()=>Object.values(R).filter(l=>l.chainId!==void 0));const U=F(()=>Object.values(R).find(l=>l.chainId===c.value)),h=(l,o)=>l.addresses[o]||null,C=(l,o,t=!1)=>t?l.addresses[o]||null:l[o]||null,I=l=>l.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase()),$=l=>{const o=U.value;if(o?.blockExplorer){const t=`${o.blockExplorer}/address/${l}`;window.open(t,"_blank")}},P=l=>{f.value=l,b.value=!0,setTimeout(()=>{b.value=!1},3e3)},N=async l=>{try{await navigator.clipboard.writeText(l),P(s("status.toast.addressCopied"))}catch(o){console.error("复制失败:",o)}},_=async()=>{if(y.provider)for(const[l,o]of Object.entries(p)){v.value[l]={totalSupply:"0",userBalance:"0",loading:!0};try{const t=h(o,c.value);if(!t)continue;const n=O.getERC20Contract(t);if(!n)continue;const[g,W]=await Promise.all([n.totalSupply(),y.address?n.balanceOf(y.address):Promise.resolve(0)]);v.value[l]={totalSupply:K(g,o.decimals),userBalance:K(W,o.decimals),loading:!1}}catch(t){console.error(`Failed to load data for ${l}:`,t),v.value[l].loading=!1}}};A(()=>y.isConnected,()=>{_()},{immediate:!0}),A(c,()=>{_()});const D=async()=>{if(!(!k.value||!y.provider)){M.value=!0,w.value={};try{for(const[l,o]of Object.entries(p)){const t=h(o,c.value);if(!t)continue;const n=O.getERC20Contract(t);if(!n)continue;const g=await n.balanceOf(k.value);w.value[l]=ee(g)}}catch(l){console.error("Failed to query address balance:",l),f.value=s("status.balanceModal.queryFailed"),b.value=!0,setTimeout(()=>{b.value=!1},2e3)}finally{M.value=!1}}},V=(l,o=!0)=>{const t=o?p[l]:H[l];k.value=C(t,c.value,o)||"",w.value={},T.value=!0,D()},L=l=>{u.value={tokenKey:l,toAddress:"",amount:"",loading:!1},B.value=!0},Q=async()=>{if(!(!u.value.toAddress||!u.value.amount||!y.signer)){u.value.loading=!0;try{const l=p[u.value.tokenKey],o=h(l,c.value);if(!o)throw new Error("Token not deployed on this network");const t=O.getERC20Contract(o,!0);if(!t)throw new Error("Failed to get contract");const n=String(u.value.amount),g=await t.transfer(u.value.toAddress,te(n,l.decimals));f.value=s("status.toast.transferSubmitted"),b.value=!0,setTimeout(()=>{b.value=!1},3e3),await g.wait(),f.value=s("status.toast.transferSuccess"),b.value=!0,setTimeout(()=>{b.value=!1},2e3),B.value=!1,_()}catch(l){console.error("Transfer failed:",l),f.value=`${s("status.toast.transferFailed")}: ${l.message||s("status.toast.unknownError")}`,b.value=!0,setTimeout(()=>{b.value=!1},3e3)}finally{u.value.loading=!1}}};return Y(()=>{_()}),(l,o)=>(i(),d("div",ae,[e("div",oe,[e("h1",re,r(a(s)("status.title")),1),e("div",le,[e("button",{onClick:_,disabled:Object.values(v.value).some(t=>t.loading),class:"inline-flex items-center px-4 py-2 bg-blue-600 dark:bg-blue-700 text-white text-sm font-medium rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:a(s)("status.refreshData")},[(i(),d("svg",{class:Z(["w-4 h-4 mr-2",{"animate-spin":Object.values(v.value).some(t=>t.loading)}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o[5]||(o[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),z(" "+r(a(s)("status.refresh")),1)],8,ne)]),e("div",de,[e("h2",ie,r(a(s)("status.tokenContracts")),1),e("div",ue,[(i(!0),d(j,null,q(a(p),(t,n)=>(i(),d("div",{key:n,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700"},[e("div",ce,[e("h3",ge,r(t.name),1),e("span",be,r(t.symbol),1)]),e("div",ye,[e("div",ve,[e("span",xe,r(a(s)("status.precision"))+":",1),z(" "+r(t.decimals),1)]),e("div",me,[e("span",he,r(a(s)("status.totalSupply"))+":",1),v.value[n]?.loading?(i(),d("span",pe,r(a(s)("common.loading")),1)):(i(),d("span",fe,r(v.value[n]?.totalSupply)+" "+r(t.symbol),1))]),a(y).isConnected?(i(),d("div",ke,[e("span",_e,r(a(s)("status.myBalance"))+":",1),v.value[n]?.loading?(i(),d("span",we,r(a(s)("common.loading")),1)):(i(),d("span",Ce,r(v.value[n]?.userBalance)+" "+r(t.symbol),1))])):m("",!0),e("div",Me,[e("span",Be,r(a(s)("status.address"))+":",1),e("div",Te,[e("code",Ae,r(h(t,c.value)||a(s)("status.notDeployed")),1),h(t,c.value)?(i(),d("div",je,[e("button",{onClick:g=>$(h(t,c.value)),class:"p-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",title:a(s)("status.viewOnExplorer")},o[6]||(o[6]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)]),8,qe),e("button",{onClick:g=>N(h(t,c.value)),class:"p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:a(s)("status.copyAddress")},o[7]||(o[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Se)])):m("",!0)])]),h(t,c.value)?(i(),d("div",Ee,[e("button",{onClick:g=>V(n),class:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},r(a(s)("status.queryBalance")),9,Oe),t.symbol!=="sRMB"?(i(),d("button",{key:0,onClick:g=>L(n),disabled:!a(y).isConnected,class:"flex-1 px-3 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-sm rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(a(s)("status.quickTransfer")),9,$e)):m("",!0)])):m("",!0)])]))),128))])]),e("div",null,[e("h2",Ne,r(a(s)("status.smartContracts")),1),e("div",De,[(i(!0),d(j,null,q(a(H),(t,n)=>(i(),d("div",{key:n,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700"},[e("div",Ve,[e("h3",Fe,r(I(n)),1),e("span",Re,r(a(s)("status.contract")),1)]),e("div",ze,[e("div",He,[e("span",Ke,r(a(s)("status.address"))+":",1),e("div",Ue,[e("code",Ie,r(C(t,c.value)||a(s)("status.notDeployed")),1),C(t,c.value)?(i(),d("div",Pe,[e("button",{onClick:g=>$(C(t,c.value)),class:"p-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors",title:a(s)("status.viewOnExplorer")},o[8]||(o[8]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)]),8,Le),e("button",{onClick:g=>N(C(t,c.value)),class:"p-1 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",title:a(s)("status.copyAddress")},o[9]||(o[9]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,Qe)])):m("",!0)])])]),e("div",We,[e("button",{onClick:g=>V(n,!1),class:"flex-1 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},r(a(s)("status.queryBalance")),9,Ge)])]))),128))])])]),T.value?(i(),d("div",Je,[e("div",Xe,[e("h3",Ye,r(a(s)("status.queryBalanceModal.title")),1),e("div",Ze,[e("div",null,[e("label",et,r(a(s)("status.queryBalanceModal.walletAddress")),1),S(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>k.value=t),type:"text",placeholder:a(s)("status.queryBalanceModal.placeholder"),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"},null,8,tt),[[E,k.value]])]),e("div",st,[e("button",{onClick:D,disabled:!k.value||M.value,class:"flex-1 px-4 py-2 bg-blue-600 dark:bg-blue-700 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"},r(M.value?a(s)("status.queryBalanceModal.querying"):a(s)("status.queryBalanceModal.query")),9,at),e("button",{onClick:o[1]||(o[1]=t=>T.value=!1),class:"flex-1 px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500"},r(a(s)("status.queryBalanceModal.cancel")),1)]),Object.keys(w.value).length>0?(i(),d("div",ot,[e("h4",rt,r(a(s)("status.queryBalanceModal.results")),1),(i(!0),d(j,null,q(w.value,(t,n)=>(i(),d("div",{key:n,class:"flex justify-between items-center py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded"},[e("span",lt,r(a(p)[n].symbol),1),e("span",nt,r(t),1)]))),128))])):m("",!0)])])])):m("",!0),B.value?(i(),d("div",dt,[e("div",it,[e("h3",ut,r(a(s)("status.transferModal.title"))+" - "+r(a(p)[u.value.tokenKey]?.symbol),1),e("div",ct,[e("div",null,[e("label",gt,r(a(s)("status.transferModal.receiverAddress")),1),S(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>u.value.toAddress=t),type:"text",placeholder:a(s)("status.transferModal.receiverPlaceholder"),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"},null,8,bt),[[E,u.value.toAddress]])]),e("div",null,[e("label",yt,r(a(s)("status.transferModal.transferAmount")),1),S(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>u.value.amount=t),type:"number",step:"0.000001",placeholder:a(s)("status.transferModal.amountPlaceholder"),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"},null,8,vt),[[E,u.value.amount]]),e("div",xt,r(a(s)("status.transferModal.availableBalance"))+": "+r(v.value[u.value.tokenKey]?.userBalance)+" "+r(a(p)[u.value.tokenKey]?.symbol),1)]),e("div",mt,[e("button",{onClick:Q,disabled:!u.value.toAddress||!u.value.amount||u.value.loading,class:"flex-1 px-4 py-2 bg-blue-600 dark:bg-blue-700 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"},r(u.value.loading?a(s)("status.transferModal.transferring"):a(s)("status.transferModal.confirmTransfer")),9,ht),e("button",{onClick:o[4]||(o[4]=t=>B.value=!1),disabled:u.value.loading,class:"flex-1 px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 disabled:opacity-50"},r(a(s)("status.transferModal.cancel")),9,pt)])])])])):m("",!0),b.value?(i(),d("div",ft,r(f.value),1)):m("",!0)]))}}),Mt=se(kt,[["__scopeId","data-v-f9e23868"]]);export{Mt as default};
//# sourceMappingURL=Status-aXGcmOg5.js.map

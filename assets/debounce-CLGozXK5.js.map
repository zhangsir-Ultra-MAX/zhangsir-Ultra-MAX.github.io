{"version":3,"file":"debounce-CLGozXK5.js","sources":["../../src/utils/debounce.ts"],"sourcesContent":["/**\r\n * Debounce utility function\r\n * Delays the execution of a function until after a specified delay has elapsed\r\n * since the last time it was invoked.\r\n */\r\n\r\n/**\r\n * Creates a debounced function that delays invoking func until after wait milliseconds\r\n * have elapsed since the last time the debounced function was invoked.\r\n * \r\n * @param func - The function to debounce\r\n * @param wait - The number of milliseconds to delay\r\n * @param immediate - If true, trigger the function on the leading edge instead of trailing\r\n * @returns The debounced function\r\n */\r\nexport function debounce<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number,\r\n  immediate: boolean = false\r\n): (...args: Parameters<T>) => void {\r\n  let timeout: NodeJS.Timeout | null = null\r\n  \r\n  return function executedFunction(...args: Parameters<T>) {\r\n    const later = () => {\r\n      timeout = null\r\n      if (!immediate) func(...args)\r\n    }\r\n    \r\n    const callNow = immediate && !timeout\r\n    \r\n    if (timeout) {\r\n      clearTimeout(timeout)\r\n    }\r\n    \r\n    timeout = setTimeout(later, wait)\r\n    \r\n    if (callNow) {\r\n      func(...args)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a debounced function that returns a Promise\r\n * Useful for async operations that need to be debounced\r\n * \r\n * @param func - The async function to debounce\r\n * @param wait - The number of milliseconds to delay\r\n * @returns The debounced async function\r\n */\r\nexport function debounceAsync<T extends (...args: any[]) => Promise<any>>(\r\n  func: T,\r\n  wait: number\r\n): (...args: Parameters<T>) => Promise<ReturnType<T>> {\r\n  let timeout: NodeJS.Timeout | null = null\r\n  let resolvePromise: ((value: ReturnType<T>) => void) | null = null\r\n  let rejectPromise: ((reason?: any) => void) | null = null\r\n  \r\n  return function executedFunction(...args: Parameters<T>): Promise<ReturnType<T>> {\r\n    return new Promise((resolve, reject) => {\r\n      if (timeout) {\r\n        clearTimeout(timeout)\r\n        if (rejectPromise) {\r\n          rejectPromise(new Error('Debounced call cancelled'))\r\n        }\r\n      }\r\n      \r\n      resolvePromise = resolve\r\n      rejectPromise = reject\r\n      \r\n      timeout = setTimeout(async () => {\r\n        try {\r\n          const result = await func(...args)\r\n          if (resolvePromise) {\r\n            resolvePromise(result)\r\n          }\r\n        } catch (error) {\r\n          if (rejectPromise) {\r\n            rejectPromise(error)\r\n          }\r\n        } finally {\r\n          timeout = null\r\n          resolvePromise = null\r\n          rejectPromise = null\r\n        }\r\n      }, wait)\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * Throttle utility function\r\n * Ensures a function is called at most once per specified time period\r\n * \r\n * @param func - The function to throttle\r\n * @param limit - The time limit in milliseconds\r\n * @returns The throttled function\r\n */\r\nexport function throttle<T extends (...args: any[]) => any>(\r\n  func: T,\r\n  limit: number\r\n): (...args: Parameters<T>) => void {\r\n  let inThrottle: boolean = false\r\n  \r\n  return function executedFunction(...args: Parameters<T>) {\r\n    if (!inThrottle) {\r\n      func(...args)\r\n      inThrottle = true\r\n      setTimeout(() => {\r\n        inThrottle = false\r\n      }, limit)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a debounced ref watcher for Vue 3\r\n * Useful for watching reactive values with debouncing\r\n * \r\n * @param callback - The callback function to execute\r\n * @param wait - The number of milliseconds to delay\r\n * @returns The debounced callback function\r\n */\r\nexport function debouncedWatch<T>(\r\n  callback: (newValue: T, oldValue: T) => void,\r\n  wait: number\r\n): (newValue: T, oldValue: T) => void {\r\n  return debounce(callback, wait)\r\n}\r\n\r\n/**\r\n * Creates a debounced input handler\r\n * Specifically designed for handling user input events\r\n * \r\n * @param handler - The input handler function\r\n * @param delay - The debounce delay in milliseconds (default: 300)\r\n * @returns The debounced input handler\r\n */\r\nexport function debounceInput(\r\n  handler: (value: string) => void,\r\n  delay: number = 300\r\n): (event: Event) => void {\r\n  const debouncedHandler = debounce(handler, delay)\r\n  \r\n  return (event: Event) => {\r\n    const target = event.target as HTMLInputElement\r\n    if (target) {\r\n      debouncedHandler(target.value)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a debounced search function\r\n * Useful for search inputs that trigger API calls\r\n * \r\n * @param searchFunction - The search function to debounce\r\n * @param delay - The debounce delay in milliseconds (default: 500)\r\n * @returns The debounced search function\r\n */\r\nexport function debounceSearch<T>(\r\n  searchFunction: (query: string) => Promise<T>,\r\n  delay: number = 500\r\n): (query: string) => Promise<T> {\r\n  return debounceAsync(searchFunction, delay)\r\n}\r\n\r\n/**\r\n * Creates a debounced resize handler\r\n * Useful for handling window resize events\r\n * \r\n * @param handler - The resize handler function\r\n * @param delay - The debounce delay in milliseconds (default: 250)\r\n * @returns The debounced resize handler\r\n */\r\nexport function debounceResize(\r\n  handler: () => void,\r\n  delay: number = 250\r\n): () => void {\r\n  return debounce(handler, delay)\r\n}\r\n\r\n/**\r\n * Creates a debounced scroll handler\r\n * Useful for handling scroll events\r\n * \r\n * @param handler - The scroll handler function\r\n * @param delay - The debounce delay in milliseconds (default: 100)\r\n * @returns The debounced scroll handler\r\n */\r\nexport function debounceScroll(\r\n  handler: (event: Event) => void,\r\n  delay: number = 100\r\n): (event: Event) => void {\r\n  return debounce(handler, delay)\r\n}"],"names":["debounce","func","wait","immediate","timeout","args","later","callNow"],"mappings":"AAeO,SAASA,EACdC,EACAC,EACAC,EAAqB,GACa,CAClC,IAAIC,EAAiC,KAE9B,OAAA,YAA6BC,EAAqB,CACvD,MAAMC,EAAQ,IAAM,CACRF,EAAA,KACLD,GAAgBF,EAAA,GAAGI,CAAI,CAC9B,EAEME,EAAUJ,GAAa,CAACC,EAE1BA,GACF,aAAaA,CAAO,EAGZA,EAAA,WAAWE,EAAOJ,CAAI,EAE5BK,GACFN,EAAK,GAAGI,CAAI,CAEhB,CACF"}
import{f as w}from"./format-DgO97vlP.js";import{d as x,r as l,c as I,w as g,o as B,a4 as T,x as V,f as S,G as k,t as A,h as D,J as F,_ as M}from"./index-EBZBD7IP.js";const P={class:"integer-part"},$={key:0,class:"decimal-part"},q=x({__name:"AnimatedNumber",props:{value:{},duration:{default:1e3},decimals:{default:8},increment:{default:1e-8},autoIncrement:{type:Boolean,default:!1},incrementInterval:{default:100},incrementAmount:{default:1e-8},cacheKey:{default:""},useCache:{type:Boolean,default:!1}},setup(N){const a=N,c=l("0"),o=l(0),r=l(0),u=l(null),s=l(null),C=I(()=>c.value.split(".")[0]),m=I(()=>{const e=c.value.split(".");return e.length>1?"."+e[1]:""}),i=e=>e.toFixed(a.decimals),d=e=>{if(a.useCache&&a.cacheKey)try{e+=a.incrementAmount,localStorage.setItem(`animated-number-${a.cacheKey}`,e.toString())}catch(t){console.error("Failed to save to cache:",t)}},f=()=>{if(a.useCache&&a.cacheKey)try{const e=localStorage.getItem(`animated-number-${a.cacheKey}`);if(e)return parseFloat(e)}catch(e){console.error("Failed to load from cache:",e)}return null},p=()=>{const e=o.value,t=r.value,n=Date.now(),y=()=>{const b=Date.now()-n,_=Math.min(b/a.duration,1),K=1-Math.pow(1-_,4);o.value=e+(t-e)*K,c.value=i(o.value),_<1?u.value=requestAnimationFrame(y):(o.value=t,c.value=i(t),d(t))};y()},v=()=>{a.autoIncrement&&(s.value=window.setInterval(()=>{r.value+=a.incrementAmount,p()},a.incrementInterval))},h=()=>{s.value&&(clearInterval(s.value),s.value=null)};return g(()=>a.value,e=>{const t=typeof e=="string"?parseFloat(e):e;if(!isNaN(t)&&t!==r.value){const n=f();n!==null&&t<n?r.value=n:r.value=t,p()}},{immediate:!0}),g(()=>a.autoIncrement,e=>{e?v():h()},{immediate:!0}),B(()=>{const e=f(),t=typeof a.value=="string"?parseFloat(a.value):a.value;let n=t;e!==null&&(n=t<e?e:t),isNaN(n)||(o.value=n,r.value=n,c.value=i(n)),a.autoIncrement&&v()}),T(()=>{u.value&&cancelAnimationFrame(u.value),h(),a.useCache&&a.cacheKey&&d(o.value)}),(e,t)=>(F(),V("span",null,[S("span",P,A(D(w)(C.value,0)),1),m.value?(F(),V("span",$,A(m.value),1)):k("",!0)]))}}),J=M(q,[["__scopeId","data-v-fed89e0f"]]);export{J as A};
//# sourceMappingURL=AnimatedNumber-DMAocXSA.js.map
